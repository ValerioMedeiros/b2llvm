\documentclass[10pt,a4paper]{article}
\include{codeFormat}

\begin{document}

\begin{llvmcode}
define void @counter$init$(%counter$ref$ %self$) {
entry:
  %0 = getelementptr %counter$ref$ %self$, i32 0, i32 0
  store i32 0, i32* %0
  %1 = getelementptr %counter$ref$ %self$, i32 0, i32 1
  store i1 0, i1* %1
  br label %exit
exit:
  ret void
}
define void @counter$inc(%counter$ref$ %self$) {
entry:
  %0 = getelementptr %counter$ref$ %self$, i32 0, i32 0
  %1 = load i32* %0
  %2 = icmp slt i32 %1, 2147483647
  br i1 %2, label %label0, label %label1
label0:
  %3 = getelementptr %counter$ref$ %self$, i32 0, i32 0
  %4 = load i32* %3
  %5 = add i32 %4, 1
  %6 = getelementptr %counter$ref$ %self$, i32 0, i32 0
  store i32 %5, i32* %6
  br label %exit
label1:
  %7 = getelementptr %counter$ref$ %self$, i32 0, i32 1
  store i1 1, i1* %7
  br label %exit
exit:
  ret void
}
define void @counter$get(%counter$ref$ %self$, i32* %res) {
entry:
  %0 = getelementptr %counter$ref$ %self$, i32 0, i32 0
  %1 = load i32* %0
  store i32 %1, i32* %res
  br label %exit
exit:
  ret void
}
\end{llvmcode}

\end{document}


